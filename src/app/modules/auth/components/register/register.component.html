
<div class="container">
  <div class="row justify-content-center">
    <div class="col-4">
      <form [formGroup]="registerForm" (ngSubmit)="register()">
        <h2 class="text-center text-primary mt-1">Sign Up</h2>
        <hr>

        <div class="form-group m-1">
          <label class="control-label" style="margin-right:10px">I am a:</label>
          <label class="radio-inline">
            <input type="radio" class="me-3" value="male" formControlName="gender">Male
          </label>
          <label class="radio-inline ms-3">
            <input type="radio" class="me-3" value="female" formControlName="gender">Female
          </label>
        </div>

        <div class="form-group m-1 mt-2">
          <input type="text" [ngClass]="{'is-invalid': registerForm.get('username')?.errors && registerForm.get('username')?.touched}"
          class="form-control" placeholder="Username" name="username" formControlName="username">
          <div class="invalid-feedback">Please choose a username</div>
        </div>

        <div class="form-group m-1 mt-2">
          <input [ngClass]="{'is-invalid': registerForm.get('knownAs')?.errors && registerForm.get('knownAs')?.touched}" class="form-control"
            placeholder="Known as" formControlName="knownAs" type="text">
          <div class="invalid-feedback" *ngIf="registerForm.get('knownAs')?.touched && registerForm.get('knownAs')?.hasError('required')">Known as is required</div>
        </div>

        <div class="input-group m-1 mt-2 pe-2">
          <input formControlName="dateOfBirth" [ngClass]="{'is-invalid': registerForm.get('dateOfBirth')?.errors && registerForm.get('dateOfBirth')?.touched}"
          class="form-control" placeholder="yyyy-mm-dd" name="dp" [(ngModel)]="selectedDate" (ngModelChange)="onDateChange($event)" ngbDatepicker #d="ngbDatepicker"/>
          <button class="btn btn-outline-secondary fa fa-calendar" (click)="d.toggle()" type="button"></button>
          <div class="invalid-feedback" *ngIf="registerForm.get('dateOfBirth')?.touched && registerForm.get('dateOfBirth')?.hasError('required')">Date of Birth is required</div>
        </div>

        <div class="form-group m-1 mt-2">
          <input [ngClass]="{'is-invalid': registerForm.get('city')?.errors && registerForm.get('city')?.touched}" class="form-control"
            placeholder="City" formControlName="city">
          <div class="invalid-feedback" *ngIf="registerForm.get('city')?.touched && registerForm.get('city')?.hasError('required')">City is required</div>
        </div>

        <div class="form-group m-1 mt-2">
          <input [ngClass]="{'is-invalid': registerForm.get('country')?.errors && registerForm.get('country')?.touched}" class="form-control"
            placeholder="Country" formControlName="country">
          <div class="invalid-feedback" *ngIf="registerForm.get('country')?.touched && registerForm.get('country')?.hasError('required')">Country is required</div>
        </div>

        <div class="form-group m-1 mt-2">
          <input type="password" [ngClass]="{'is-invalid': registerForm.get('password')?.errors && registerForm.get('password')?.touched}"
           class="form-control" placeholder="Password" name="password" formControlName="password">
           <div class="invalid-feedback" *ngIf="registerForm.get('password')?.hasError('required') && registerForm.get('password')?.touched">Password is required</div>
           <div class="invalid-feedback" *ngIf="registerForm.get('password')?.hasError('minlength') && registerForm.get('password')?.touched">Password must be at least 4 characters</div>
           <div class="invalid-feedback" *ngIf="registerForm.get('password')?.hasError('maxlength') && registerForm.get('password')?.touched">Password cannot exceed 8 characters</div>
        </div>

        <div class="form-group m-1 mt-2">
          <input type="password"
          [ngClass]="{'is-invalid': registerForm.get('confirmPassword')?.errors && registerForm.get('confirmPassword')?.touched
                                 || registerForm.get('confirmPassword')?.touched && registerForm.hasError('mismatch')}"
          class="form-control" placeholder="Confirm Password" name="password" formControlName="confirmPassword">
          <div class="invalid-feedback" *ngIf="registerForm.get('confirmPassword')?.hasError('required') && registerForm.get('confirmPassword')?.touched">Password is required</div>
          <div class="invalid-feedback" *ngIf="registerForm.hasError('mismatch') && registerForm.get('confirmPassword')?.touched">Passwords must match</div>
        </div>

        <div class="form-group text-center m-1">
          <button class="btn btn-success m-1" type="submit" [disabled]="!registerForm.valid">Register</button>
          <button class="btn btn-secondary m-1" type="button" [routerLink]="'/'">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
